<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/0479d49da1.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Backend Node</title>
</head>
<style>
    .chat_row {
        height: 90vmin;
        overflow-y: scroll;
    }

    .chat_input {
        height: 10vmin;
    }
</style>
<% const userChat='bg-success text-end' ; const serverChat='bg-secondary' ; const responseChat='bg-primary' ; %>

    <body>
        <div class="bg-light">
            <div class=" container mx-auto  text-dark">
                <div class="py-3">
                    <h1 class=" h2">Centro de mensajes</h1>
                </div>
                <div id='chatList' class="chat_row row">
                    <% if (messages.length) { %>
                        <% messages.forEach(e=> { %>
                            <div class="<% if (e.type==='user') { %>d-flex flex-row-reverse<% }%>">
                                <div
                                    class=" p-2 text-dark bg-opacity-25 m-1 rounded col-11  <% if (e.email===userEmail && e.type === 'system' ){ %> <%= responseChat %> <% } else if (e.email===userEmail) { %> <%= userChat %>  <% }  else {%>  <%= serverChat %> <% } %>   > ">
                                    <div class="py-1">
                                        <span class="card-text  fw-bold">
                                            <%= e.name %>
                                        </span>
                                        <span class="card-text">
                                            <%= e.email %>
                                        </span>

                                    </div>
                                    <p>
                                        <%= e.body %>
                                    </p>
                                    <span class="card-text"><small class="text-muted">
                                            <%= e.createdAt %>
                                        </small></span>
                                </div>
                            </div>

                            <% }) %>
                                <% }else{ %>
                                    <div class="col-md-12">
                                        <div class="alert alert-primary" role="alert">
                                            <p>No se encontraron mensajes.</p>
                                        </div>
                                    </div>
                                    <% }%>
                </div>

            </div>
        </div>
    </body>

</html>